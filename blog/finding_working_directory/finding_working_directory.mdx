---
slug: finding_working_directory
title: How To Find Your Project's Working Directory
authors: chien
date: 2025-05-19
tags: [ shell, bash ]
---

## üìÅ How to Reliably Find Your Project's Working Directory in Shell Scripts

When you‚Äôre writing shell scripts to automate things like testing, building, or
deployment, it‚Äôs common to place them in a `scripts/` folder. But sometimes
those scripts need to execute commands relative to the *project root*. This
introduces a small but annoying problem: how do you reliably find your way
*back* to the project root, regardless of where the script is executed from?

### üß© The Problem

Let‚Äôs say you have a typical Go project structure:

```
my-project/
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ main.go
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ test.sh
```

In `scripts/test.sh`, you might want to run:

```bash
go test ./...
```

But `go test ./...` only works correctly if it's run from the *project root*,
where `go.mod` is located. Running it from within the `scripts/` folder will
cause it to miss packages.

One naive solution is to instruct users to `cd ..` into the root directory
before running the script. But that‚Äôs fragile and error-prone.

### ‚úÖ Solution 1: Use Git to Find the Project Root

If your project is in a Git repository, this one-liner gives you the root
directory:

```bash
PROJECT_ROOT=$(git rev-parse --show-toplevel)
```

It‚Äôs simple and elegant. But it only works if:

* You‚Äôre inside a Git repository
* You don‚Äôt have submodules that complicate the directory layout

### ‚úÖ Solution 2: Use Script Path Detection

For a Git-agnostic solution, you can calculate the project root by using the
script‚Äôs path itself. This is especially helpful for scripts located in the
`scripts/` directory:

```bash
# Get the directory where the current script is located
SCRIPTS_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Go up one level to reach the project root
PROJECT_DIR="$(cd "$SCRIPTS_DIR/.." && pwd)"

# Use the project directory as the working dir
cd "$PROJECT_DIR"
go test ./...
```

This pattern ensures that no matter where you invoke the script from, it will
always compute the correct project root relative to its own location.

### üõ†Ô∏è Which One Should You Use?

| Method                  | Pros                         | Cons                                |
|-------------------------|------------------------------|-------------------------------------|
| `git rev-parse`         | Simple, fast                 | Requires Git; fails in CI sometimes |
| Script path calculation | More robust, Git-independent | Slightly more verbose               |

Use the Git method if your workflow is always Git-based. Use the second if you
want broader compatibility or better CI behavior.